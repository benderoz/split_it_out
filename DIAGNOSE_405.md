# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–∫–∏ 405 Method Not Allowed

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

‚úÖ **–°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
- GET `/api/health` - OK
- POST `/api/test` - OK  
- POST `/api/upload-receipt` —Å —Ñ–∞–π–ª–æ–º - OK

**–ü—Ä–æ–±–ª–µ–º–∞ –ù–ï –≤ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏!**

## –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
```bash
node server.js
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ API endpoints
```bash
# Health check
curl http://localhost:3000/api/health

# POST —Ç–µ—Å—Ç
curl -X POST http://localhost:3000/api/test \
  -H "Content-Type: application/json" \
  -d '{"test": "data"}'

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
curl -X POST http://localhost:3000/api/upload-receipt \
  -F "receipt=@test-image.png"
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://localhost:3000/test-upload.html**

–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç API
- –ü–æ–∫–∞–∂–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
- –ü–æ–∑–≤–æ–ª–∏—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram Mini App

–û—Ç–∫—Ä–æ–π—Ç–µ: **http://localhost:3000**

1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

–í DevTools:
1. –í–∫–ª–∞–¥–∫–∞ **Network**
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
3. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `/api/upload-receipt`
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ:
   - –°—Ç–∞—Ç—É—Å –∫–æ–¥ –æ—Ç–≤–µ—Ç–∞
   - Request Headers
   - Response Headers
   - Request Payload

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–∫–∏ 405

### 1. –ü—Ä–æ–±–ª–µ–º–∞ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–¥–µ
```javascript
// –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –Ω–µ–≤–µ—Ä–Ω—ã–π –º–µ—Ç–æ–¥
fetch('/api/upload-receipt', {
    method: 'GET',  // ‚ùå –î–æ–ª–∂–µ–Ω –±—ã—Ç—å POST
    body: formData
});

// –ü–†–ê–í–ò–õ–¨–ù–û
fetch('/api/upload-receipt', {
    method: 'POST', // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥
    body: formData
});
```

### 2. –ü—Ä–æ–±–ª–µ–º–∞ —Å CORS
–ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –∏–¥–µ—Ç —Å –¥—Ä—É–≥–æ–≥–æ –¥–æ–º–µ–Ω–∞, –¥–æ–±–∞–≤—å—Ç–µ CORS headers.

### 3. –ü—Ä–æ–±–ª–µ–º–∞ —Å middleware
–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –º–∞—Ä—à—Ä—É—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –¥–æ –¥—Ä—É–≥–∏—Ö middleware.

### 4. –ü—Ä–æ–±–ª–µ–º–∞ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ.

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è

### –®–∞–≥ 1: –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
tail -f server.log

# –ò–ª–∏ –µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω –≤ –∫–æ–Ω—Å–æ–ª–∏, —Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã–≤–æ–¥
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å
–í DevTools ‚Üí Network ‚Üí –Ω–∞–π–¥–∏—Ç–µ failed –∑–∞–ø—Ä–æ—Å:
- URL –∑–∞–ø—Ä–æ—Å–∞
- Method
- Headers
- Payload

### –®–∞–≥ 3: –°—Ä–∞–≤–Ω–∏—Ç–µ —Å —Ä–∞–±–æ—á–∏–º curl
```bash
# –≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –î–û–õ–ñ–ï–ù —Ä–∞–±–æ—Ç–∞—Ç—å:
curl -X POST http://localhost:3000/api/upload-receipt \
  -F "receipt=@test-image.png"
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã
- Chrome
- Firefox
- Safari
- –ú–æ–±–∏–ª—å–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä

## –õ–æ–≥–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è, –ø—Ä–∏—à–ª–∏—Ç–µ:

1. **–õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞** (–ø–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ –∫–æ–Ω—Å–æ–ª–∏)
2. **–°–∫—Ä–∏–Ω—à–æ—Ç DevTools ‚Üí Network** —Å failed –∑–∞–ø—Ä–æ—Å–æ–º
3. **–°–∫—Ä–∏–Ω—à–æ—Ç DevTools ‚Üí Console** —Å –æ—à–∏–±–∫–∞–º–∏
4. **–ë—Ä–∞—É–∑–µ—Ä –∏ –≤–µ—Ä—Å–∏—è**
5. **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**

## –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
curl http://localhost:3000/api/health

# 2. –ï—Å–ª–∏ health –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç
netstat -tlnp | grep 3000

# 3. –ï—Å–ª–∏ –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç - –Ω–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å
lsof -i :3000

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
pkill -f "node server"
node server.js
```

## –†–µ—à–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ?

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–¥–µ, –∏—Å–ø—Ä–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞:

```javascript
// –í public/script.js, —Ñ—É–Ω–∫—Ü–∏—è analyzeReceipt()
const response = await fetch('/api/upload-receipt', {
    method: 'POST',  // ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —ç—Ç–æ POST
    body: formData   // ‚úÖ FormData –¥–ª—è —Ñ–∞–π–ª–æ–≤
});
```

---

**üí° –ü–æ–º–Ω–∏—Ç–µ: –æ—à–∏–±–∫–∞ 405 = –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π HTTP –º–µ—Ç–æ–¥ –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∞**